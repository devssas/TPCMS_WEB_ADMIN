"use strict";var main={init:function(){Handlebars.registerHelper("link",(function(e,a){a=Handlebars.escapeExpression(a),e=Handlebars.escapeExpression(e);return new Handlebars.SafeString("<a href='"+a+"' class='button-v1 btn-color-1'><i class='"+e+"'></i></a>")})),Handlebars.registerHelper("inc",(function(e,a){return parseInt(e)+1}))},cardTransactionLocations:function(){var e,a={url:"assets/images/layout/pin.png",size:new google.maps.Size(100,102),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(50,48)},n=null,t=null,o=[];$.ajax({type:"GET",url:"assets/ajax/marker.json"}).done((function(r){e=r,function(){t=new google.maps.Map(document.getElementById("map"),{center:new google.maps.LatLng(e.mapsCenter[0]),zoom:11,mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!1}),n&&(n.clearMarkers(),o=[]);for(var r=0;r<e.data.length;++r){var i=new google.maps.LatLng(e.data[r].lat,e.data[r].lng),s=new google.maps.Marker({position:i,icon:a,markerLat:e.data[r].lat,markerLng:e.data[r].lng,selectedId:r,selectedState:!1});o.push(s)}n=new MarkerClusterer(t,o,{gridSize:40,styles:[{url:"assets/images/layout/map-cluster.png",width:52,height:52,textColor:"#ffffff"}]})}()}))},inputAction:function(){if($(".next-input-field").length){var e=$(".next-input-field"),a=e.attr("maxlength");e.keydown((function(e){if(8==e.which&&0==this.value.length)$(this).prev("input").focus();else{if($.inArray(e.which,[8,9,19,20,27,33,34,35,36,37,38,39,40,45,46,144,145])>=0)return!0;if(this.value.length>=a)return $(this).next("input").focus(),!1}})).keyup((function(){this.value.length>=a?$(this).next("input").focus():$(this).parents("form").valid()}))}$(".field-query").length&&$(".field-query").each((function(){$(this).on({keyup:function(){var e=$(this),a=e.data("min-lenght"),n=e.data("url"),t=e.data("method"),o=e.val();o.length>=a&&$.ajax({url:n+o,method:t,dataType:"json"}).done((function(a){!a.status&&a.message?(e.parents(".form-row").addClass("error").find(".text-danger").remove(),e.parent().append("<span class='text-danger'>"+a.message+"</span>")):e.parents(".form-row").removeClass("error").find(".text-danger").remove()}))}})}))},customSelectbox:function(){$(".select-not-find").length&&$(".select-not-find").each((function(e,a){$("select",a).data("select2")||$("select",a).select2({minimumResultsForSearch:-1,dropdownParent:$(a)}).off("select2:open").on("select2:open",(function(e){$(".select2-results .select2-results__options").niceScroll({autohidemode:!1,cursorwidth:4,cursorcolor:"#BCC3CA",cursorborder:2,cursorborderradius:2,horizrailenabled:!0})}))})),$(".select-find").length&&$(".select-find").each((function(e,a){$("select",a).data("select2")||$("select",a).select2({ajax:{url:$(a).find("select").data("json-url"),data:function(e){return{search:e.term}}},dropdownParent:$(a)}).off("select2:open").on("select2:open",(function(e){$(".select2-results .select2-results__options").niceScroll({autohidemode:!1,cursorwidth:4,cursorcolor:"#BCC3CA",cursorborder:2,cursorborderradius:2,horizrailenabled:!0})}))}))},addWitness:function(){if($(".addWitness").length){var e=1;$(".addWitness").on({click:function(){var a="<div class='form-row'><a href='javascript:;' class='button button-v4 color-1 line-height-sml removeWitness'><i class='icon-cancel'></i></a><span class='label witness-label'>Witness Statments</span><div class='input-group-content'><label><input type='text' name='witnessName"+e+"' placeholder='Name'></label><label><input type='text' name='witnessSurname"+e+"' placeholder='Surname'></label></div><div class='form-row'><label><span class='label'></span><textarea name='witnessStatement"+e+"' placeholder='Statement'></textarea></label></div></div>";$(".witness-container").append(a),e++,$(".removeWitness").off("click").on({click:function(){$(this).parents(".form-row").remove()}})}})}},datePicker:function(){if($(".datepicker").length&&$(".datepicker").each((function(){$(this).datepicker()})),$("#calendar").length){var e=$("#calendar").data("next-url");$("#calendar").datepicker({onSelect:function(a,n){window.location.href=e+"?calendarDate="+a}})}},timePicker:function(){$(".timepicker").length&&$(".timepicker").timepicker({timeFormat:"h:mm p",dynamic:!1,dropdown:!0,scrollbar:!0,zindex:99999})},dropzone:function(){$(".photo-upload").length&&$(".photo-upload").each((function(){var e=$(this).find(".photo-upload-inner"),a=e.data("upload-url"),n=e.data("delete-url"),t=e.data("max-files")?e.data("max-files"):null;e.hasClass("dz-started")||e.dropzone({url:a,maxFiles:t,addRemoveLinks:!0,dictRemoveFile:"",thumbnailMethod:"contain",dictDefaultMessage:null,removedfile:function(e){var a,t=e.name;return $.ajax({url:n,type:"POST",data:"id="+t,dataType:"html"}),null!=(a=e.previewElement)?a.parentNode.removeChild(e.previewElement):void 0},init:function(){var a=this;if(a.on("addedfile",(function(e){null!=a.files[t]&&a.removeFile(a.files[0])})),e.parents(".photo-upload").hasClass("upload-view")){var n=e.data("upload-ajax-url");$.ajax({url:n}).done((function(e){for(var n=0;n<e.data.length;n++)a.files.push(e.data[n]),a.emit("addedfile",e.data[n]),a.emit("thumbnail",e.data[n],e.data[n].url),a.emit("complete",e.data[n]),e.data[n].previewElement.classList.add("dz-success"),e.data[n].previewElement.classList.add("dz-complete")}))}}})}))},filterControl:function(){if($(".dynamic-content").length&&Boolean($(".dynamic-content").data("template-url"))&&$(".dynamic-content").is(":empty")){function e(e,a,n,t){$(".dynamic-page").addClass("loading"),n.html(""),$.ajax({url:e,method:"GET",dataType:"json",data:t,async:!1}).done((function(e){var t=Handlebars.compile(a)(e);n.html(t).parents(".dynamic-page").removeClass("loading"),main.fancybox()}))}$(".dynamic-content").each((function(){var a,n=window.location.href,t=$(this),o=t.data("template-url"),r=t.data("json-url");n.indexOf("?calendarDate")>0&&(o+="?"+n.split("?")[1]);$.ajax({url:o,method:"GET"}).done((function(n){a=n,$("#filter-form").length?$("#filter-form").submit((function(n){n.preventDefault();var o=$("#filter-form").serialize();e(r,a,t,o)})).submit():e(r,a,t)}))}))}},carousel:function(){$(".card-carousel").length&&$(".card-carousel").owlCarousel({rtl:!0,margin:15,nav:!0,navText:["<i class='icon-right-open'></i>","<i class='icon-left-open'></i>"],dots:!1})},fancybox:function(){$.fancybox.defaults.touch=!1,$("[data-fancybox-card]").length&&$("[data-fancybox-card]").fancybox({smallBtn:!1,toolbar:!1}),$("[data-fancybox-search]").length&&$("[data-fancybox-search]").fancybox({smallBtn:!1,toolbar:!1,beforeLoad:function(e,a,n){var t=n.opts.$orig;t&&t.parents(".search-box-v2").addClass("fancy-click-element")}}),$(document).on("afterLoad.fb",(function(e,a){main.carousel(),main.timePicker(),main.dropzone(),main.validationsCommon()}))},validationMethods:function(){$(".no-paste").bind("cut copy paste",(function(e){e.preventDefault()})),$(".only-number").on({keydown:function(e){-1!==$.inArray(e.keyCode,[46,8,9,27,13,110,190])||65==e.keyCode&&(!0===e.ctrlKey||!0===e.metaKey)||e.keyCode>=35&&e.keyCode<=40||(e.shiftKey||e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)&&e.preventDefault()}}),$.validator.addMethod("lettersonly",(function(e,a){return this.optional(a)||/^[a-z ğüöçıİş]+$/i.test(e)}))},validationsCommon:function(){var e,a;$("form").length&&$("form").each((function(n,t){e=$(".form-general-success",t),a=$(".form-general-error",t)}));var n={ignore:".skip-validation, .dynamic-skip-validation",errorElement:"span",errorPlacement:function(e,a){e.addClass("text-danger").appendTo(a.parents(".form-row"))},highlight:function(e,a,n){$(e).parents(".form-row").removeClass(n).addClass(a)},unhighlight:function(e,a,n){$(e).parents(".form-row").removeClass(a).addClass(n)},submitHandler:function(n){if(e.hide(),a.hide(),($(n).hasClass("login-user-name")||$(n).hasClass("login-user-code")||$(n).hasClass("login-pass-code"))&&$(n).find(".form-container").addClass("loading"),$(n).data("url")){var t=$(n).data("url"),o=$(n).attr("method")||"GET",r=$(n).attr("enctype"),i={url:t,type:o,dataType:"json",data:$(n).serialize(),cache:!1,timeout:9e5};"multipart/form-data"===r&&$.extend(i,{processData:!1,contentType:!1,timeout:6e4,data:new FormData(n)}),$.ajax(i).done((function(e){e.status?e.nextUrl&&(window.location.href=e.nextUrl):(e.message&&($(n).find(".form-general-error .alert-title").text(e.message),$(n).find(".form-general-error").show()),($(n).hasClass("login-user-name")||$(n).hasClass("login-user-code")||$(n).hasClass("login-pass-code"))&&$(n).find(".form-container").removeClass("loading"))}))}else n.submit()}},t=$(".previousCase");if(t.length){var o=$.extend({},n);t.validate(o)}var r=$(".login-user-name");if(r.length){o=$.extend({},n,{rules:{username:{required:!0}},messages:{username:{required:"Bu alan boş geçilemez."}}});r.validate(o)}var i=$(".login-user-code");if(i.length){o=$.extend({},n,{groups:{inputGroup:"userCode1 userCode2 userCode3 userCode4 userCode5"},rules:{userCode1:{required:!0},userCode2:{required:!0},userCode3:{required:!0},userCode4:{required:!0},userCode5:{required:!0}},messages:{userCode1:{required:"Bu alan boş geçilemez."},userCode2:{required:"Bu alan boş geçilemez."},userCode3:{required:"Bu alan boş geçilemez."},userCode4:{required:"Bu alan boş geçilemez."},userCode5:{required:"Bu alan boş geçilemez."}}});i.validate(o)}var s=$(".login-pass-code");if(s.length){o=$.extend({},n,{groups:{inputGroup:"passCode1 passCode2 passCode3"},rules:{passCode1:{required:!0},passCode2:{required:!0},passCode3:{required:!0}},messages:{passCode1:{required:"Bu alan boş geçilemez."},passCode2:{required:"Bu alan boş geçilemez."},passCode3:{required:"Bu alan boş geçilemez."}}});s.validate(o)}},alertify:function(e,a,n){var t="<div class='alertify "+e+"'><p class='message'>"+a+"</p></div>";$("body").append(t),$(".alertify").fadeIn(300),setInterval((function(){$(".alertify").fadeOut(300,(function(){$(this).remove()}))}),n)}};function initMap(){$("#map").length&&main.cardTransactionLocations()}$((function(){main.init(),main.inputAction(),main.customSelectbox(),main.addWitness(),main.datePicker(),main.timePicker(),main.dropzone(),main.carousel(),main.fancybox(),main.filterControl(),main.validationMethods(),main.validationsCommon()}));