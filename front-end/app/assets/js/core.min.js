"use strict";var main={init:function(){Handlebars.registerHelper("link",(function(e,t){t=Handlebars.escapeExpression(t),e=Handlebars.escapeExpression(e);return new Handlebars.SafeString("<a href='"+t+"' class='button-v1 btn-color-1'><i class='"+e+"'></i></a>")})),Handlebars.registerHelper("inc",(function(e,t){return parseInt(e)+1}))},cardTransactionLocations:function(){var e,t={url:"assets/images/layout/pin.png",size:new google.maps.Size(100,102),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(50,48)},n=null,a=null,o=[];$.ajax({type:"GET",url:"assets/ajax/marker.json"}).done((function(i){e=i,function(){a=new google.maps.Map(document.getElementById("map"),{center:new google.maps.LatLng(e.mapsCenter[0]),zoom:11,mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!1}),n&&(n.clearMarkers(),o=[]);for(var i=0;i<e.data.length;++i){var r=new google.maps.LatLng(e.data[i].lat,e.data[i].lng),s=new google.maps.Marker({position:r,icon:t,markerLat:e.data[i].lat,markerLng:e.data[i].lng,selectedId:i,selectedState:!1});o.push(s)}n=new MarkerClusterer(a,o,{gridSize:40,styles:[{url:"assets/images/layout/map-cluster.png",width:52,height:52,textColor:"#ffffff"}]})}()}))},inputAction:function(){if($(".next-input-field").length){var e=$(".next-input-field"),t=e.attr("maxlength");e.keydown((function(e){if(8==e.which&&0==this.value.length)$(this).prev("input").focus();else{if($.inArray(e.which,[8,9,19,20,27,33,34,35,36,37,38,39,40,45,46,144,145])>=0)return!0;if(this.value.length>=t)return $(this).next("input").focus(),!1}})).keyup((function(){this.value.length>=t?$(this).next("input").focus():$(this).parents("form").valid()}))}},customSelectbox:function(){$(".select-not-find").length&&$(".select-not-find").each((function(e,t){$("select",t).data("select2")||$("select",t).select2({minimumResultsForSearch:-1,dropdownParent:$(t)}).off("select2:open").on("select2:open",(function(e){$(".select2-results .select2-results__options").niceScroll({autohidemode:!1,cursorwidth:4,cursorcolor:"#BCC3CA",cursorborder:2,cursorborderradius:2,horizrailenabled:!0})}))})),$(".select-find").length&&$(".select-find").each((function(e,t){$("select",t).data("select2")||$("select",t).select2({ajax:{url:$(t).find("select").data("json-url"),data:function(e){return{search:e.term}}},dropdownParent:$(t)}).off("select2:open").on("select2:open",(function(e){$(".select2-results .select2-results__options").niceScroll({autohidemode:!1,cursorwidth:4,cursorcolor:"#BCC3CA",cursorborder:2,cursorborderradius:2,horizrailenabled:!0})}))}))},datepicker:function(){$(".datepicker").each((function(){$(this).datepicker()}))},dropzone:function(){$(".photo-upload").length,$("#js-tab4--upload").dropzone({maxFiles:1,dictDefaultMessage:"",clickable:".js-tab4---dropzone",url:"/file/post",autoProcessQueue:!1,uploadMultiple:!1,thumbnailWidth:null,thumbnailHeight:null,acceptedFiles:".jpg, .png",maxFilesize:3,accept:function(e){reader=new FileReader,reader.onload=function(t){document.getElementById("id_base64_data").setAttribute("value",t.target.result),document.getElementById("id_base64_name").setAttribute("value",e.name),document.getElementById("id_base64_content_type").setAttribute("value",e.type)},reader.readAsDataURL(e)},init:function(){var e=this;this.on("thumbnail",(function(e,t){$(".dz-image").last().find("img").attr({width:"100%",height:"100%"})})),this.on("success",(function(e){$(".dz-image").css({width:"100%",height:"auto"})})),this.on("maxfilesexceeded",(function(e){this.removeAllFiles(),this.addFile(e),$(".dz-preview").remove()})),$(".remove-item").on("click",(function(){e.removeAllFiles(),$(".remove-item").hide(),$("#js-tab4-dropzone-desc").show()})),this.on("addedfile",(function(e,t){e.size>3145728?$(".custom-dz-error").css("display","block"):$(".custom-dz-error").css("display","none"),$(".dz-preview").length>1&&$(".dz-preview")[0].remove(),$(".remove-item").show(),$("#js-tab4-dropzone-desc").hide(),$(".dz-image img").css("width","100%")})),this.on("error",(function(e,t){$(".dz-preview").remove()})),this.on("success",(function(e,t){}))}})},filterControl:function(){if($(".dynamic-content").length&&Boolean($(".dynamic-content").data("template-url"))){var e,t=$(".dynamic-content"),n=t.data("template-url"),a=t.data("json-url");$.ajax({url:n,method:"GET"}).done((function(t){e=t,$("#filter-form").length?$("#filter-form").submit((function(t){t.preventDefault();var n=$("#filter-form").serialize();o(a,e,n)})).submit():o(a,e)}))}function o(e,t,n){$(".dynamic-page").addClass("loading").find(".dynamic-content").html(""),$.ajax({url:e,method:"GET",dataType:"json",data:n,async:!1}).done((function(e){var n=Handlebars.compile(t)(e);$(".dynamic-content").html(n).parents(".dynamic-page").removeClass("loading"),main.fancybox()}))}},fancybox:function(){$("[data-fancybox-card]").length&&$("[data-fancybox-card]").fancybox({smallBtn:!1})}};function initMap(){$("#map").length&&main.cardTransactionLocations()}$((function(){main.init(),main.inputAction(),main.customSelectbox(),main.datepicker(),main.dropzone(),main.filterControl()}));