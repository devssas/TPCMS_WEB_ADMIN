"use strict";var main={init:function(){Handlebars.registerHelper("link",(function(e,n){n=Handlebars.escapeExpression(n),e=Handlebars.escapeExpression(e);return new Handlebars.SafeString("<a href='"+n+"' class='button-v1 btn-color-1'><i class='"+e+"'></i></a>")})),Handlebars.registerHelper("inc",(function(e,n){return parseInt(e)+1}))},cardTransactionLocations:function(){var e,n={url:"assets/images/layout/pin.png",size:new google.maps.Size(100,102),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(50,48)},t=null,a=null,o=[];$.ajax({type:"GET",url:"assets/ajax/marker.json"}).done((function(i){e=i,function(){a=new google.maps.Map(document.getElementById("map"),{center:new google.maps.LatLng(e.mapsCenter[0]),zoom:11,mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!1}),t&&(t.clearMarkers(),o=[]);for(var i=0;i<e.data.length;++i){var r=new google.maps.LatLng(e.data[i].lat,e.data[i].lng),l=new google.maps.Marker({position:r,icon:n,markerLat:e.data[i].lat,markerLng:e.data[i].lng,selectedId:i,selectedState:!1});o.push(l)}t=new MarkerClusterer(a,o,{gridSize:40,styles:[{url:"assets/images/layout/map-cluster.png",width:52,height:52,textColor:"#ffffff"}]})}()}))},inputAction:function(){if($(".next-input-field").length){var e=$(".next-input-field"),n=e.attr("maxlength");e.keydown((function(e){if(8==e.which&&0==this.value.length)$(this).prev("input").focus();else{if($.inArray(e.which,[8,9,19,20,27,33,34,35,36,37,38,39,40,45,46,144,145])>=0)return!0;if(this.value.length>=n)return $(this).next("input").focus(),!1}})).keyup((function(){this.value.length>=n?$(this).next("input").focus():$(this).parents("form").valid()}))}},customSelectbox:function(){$(".select-not-find").length&&$(".select-not-find").each((function(e,n){$("select",n).data("select2")||$("select",n).select2({minimumResultsForSearch:-1,dropdownParent:$(n)}).off("select2:open").on("select2:open",(function(e){$(".select2-results .select2-results__options").niceScroll({autohidemode:!1,cursorwidth:4,cursorcolor:"#BCC3CA",cursorborder:2,cursorborderradius:2,horizrailenabled:!0})}))})),$(".select-find").length&&$(".select-find").each((function(e,n){$("select",n).data("select2")||$("select",n).select2({ajax:{url:$(n).find("select").data("json-url"),data:function(e){return{search:e.term}}},dropdownParent:$(n)}).off("select2:open").on("select2:open",(function(e){$(".select2-results .select2-results__options").niceScroll({autohidemode:!1,cursorwidth:4,cursorcolor:"#BCC3CA",cursorborder:2,cursorborderradius:2,horizrailenabled:!0})}))}))},datePicker:function(){if($(".datepicker").length&&$(".datepicker").each((function(){$(this).datepicker()})),$("#calendar").length){var e=$("#calendar").data("next-url");$("#calendar").datepicker({onSelect:function(n,t){window.location.href=e+"?"+n}})}},timePicker:function(){$(".timepicker").length&&$(".timepicker").timepicker({timeFormat:"h:mm p",dynamic:!1,dropdown:!0,scrollbar:!0,zindex:99999})},dropzone:function(){if($(".photo-upload").length){var e=$(".photo-upload").data("upload-url");$(".single-photo-upload .photo-upload-inner").dropzone({url:e,maxFiles:1,thumbnailMethod:"contain"})}if($(".multiple-photo-upload").length){e=$(".photo-upload").data("upload-url"),$(".photo-upload").data("delete-url");$(".multiple-photo-upload .photo-upload-inner").dropzone({url:e,maxFiles:2,addRemoveLinks:!0,removedfile:function(e){var n,t=e.name;return $.ajax({url:"delete",type:"POST",data:"id="+t,dataType:"html"}),null!=(n=e.previewElement)?n.parentNode.removeChild(e.previewElement):void 0},maxfilesexceeded:function(e){},thumbnailMethod:"contain",init:function(){this.on("addedfile",(function(){null!=this.files[2]&&this.removeFile(this.files[0])}))}})}},filterControl:function(){if($(".dynamic-content").length&&Boolean($(".dynamic-content").data("template-url"))){var e,n=$(".dynamic-content"),t=n.data("template-url"),a=n.data("json-url");$.ajax({url:t,method:"GET"}).done((function(n){e=n,$("#filter-form").length?$("#filter-form").submit((function(n){n.preventDefault();var t=$("#filter-form").serialize();o(a,e,t)})).submit():o(a,e)}))}function o(e,n,t){$(".dynamic-page").addClass("loading").find(".dynamic-content").html(""),$.ajax({url:e,method:"GET",dataType:"json",data:t,async:!1}).done((function(e){var t=Handlebars.compile(n)(e);$(".dynamic-content").html(t).parents(".dynamic-page").removeClass("loading"),main.fancybox()}))}},carousel:function(){$(".card-carousel").length&&$(".card-carousel").owlCarousel({rtl:!0,margin:15,nav:!0,navText:["<i class='icon-right-open'></i>","<i class='icon-left-open'></i>"],dots:!1})},fancybox:function(){$.fancybox.defaults.touch=!1,$("[data-fancybox-card]").length&&$("[data-fancybox-card]").fancybox({smallBtn:!1,toolbar:!1}),$(document).on("beforeLoad.fb",(function(e,n,t){})),$(document).on("afterLoad.fb",(function(e,n){main.carousel(),main.timePicker(),main.dropzone()}))}};function initMap(){$("#map").length&&main.cardTransactionLocations()}$((function(){main.init(),main.inputAction(),main.customSelectbox(),main.datePicker(),main.timePicker(),main.dropzone(),main.carousel(),main.filterControl()}));