"use strict";var main={init:function(){Handlebars.registerHelper("link",(function(e,a){a=Handlebars.escapeExpression(a),e=Handlebars.escapeExpression(e);return new Handlebars.SafeString("<a href='"+a+"' class='button-v1 btn-color-1'><i class='"+e+"'></i></a>")})),Handlebars.registerHelper("inc",(function(e,a){return parseInt(e)+1}))},cardTransactionLocations:function(){var e,a={url:"assets/images/layout/pin.png",size:new google.maps.Size(100,102),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(50,48)},t=null,n=null,o=[];$.ajax({type:"GET",url:"assets/ajax/marker.json"}).done((function(i){e=i,function(){n=new google.maps.Map(document.getElementById("map"),{center:new google.maps.LatLng(e.mapsCenter[0]),zoom:11,mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!1}),t&&(t.clearMarkers(),o=[]);for(var i=0;i<e.data.length;++i){var r=new google.maps.LatLng(e.data[i].lat,e.data[i].lng),l=new google.maps.Marker({position:r,icon:a,markerLat:e.data[i].lat,markerLng:e.data[i].lng,selectedId:i,selectedState:!1});o.push(l)}t=new MarkerClusterer(n,o,{gridSize:40,styles:[{url:"assets/images/layout/map-cluster.png",width:52,height:52,textColor:"#ffffff"}]})}()}))},inputAction:function(){if($(".next-input-field").length){var e=$(".next-input-field"),a=e.attr("maxlength");e.keydown((function(e){if(8==e.which&&0==this.value.length)$(this).prev("input").focus();else{if($.inArray(e.which,[8,9,19,20,27,33,34,35,36,37,38,39,40,45,46,144,145])>=0)return!0;if(this.value.length>=a)return $(this).next("input").focus(),!1}})).keyup((function(){this.value.length>=a?$(this).next("input").focus():$(this).parents("form").valid()}))}$(".field-query").length&&$(".field-query").each((function(){$(this).on({keyup:function(){var e=$(this),a=e.data("min-lenght"),t=e.data("url"),n=e.data("method"),o=e.val();o.length>=a&&$.ajax({url:t+o,method:n,dataType:"json"}).done((function(a){!a.status&&a.message?(e.parents(".form-row").addClass("error").find(".text-danger").remove(),e.parent().append("<span class='text-danger'>"+a.message+"</span>")):e.parents(".form-row").removeClass("error").find(".text-danger").remove()}))}})}))},customSelectbox:function(){$(".select-not-find").length&&$(".select-not-find").each((function(e,a){$("select",a).data("select2")||$("select",a).select2({minimumResultsForSearch:-1,dropdownParent:$(a)}).off("select2:open").on("select2:open",(function(e){$(".select2-results .select2-results__options").niceScroll({autohidemode:!1,cursorwidth:4,cursorcolor:"#BCC3CA",cursorborder:2,cursorborderradius:2,horizrailenabled:!0})}))})),$(".select-find").length&&$(".select-find").each((function(e,a){$("select",a).data("select2")||$("select",a).select2({ajax:{url:$(a).find("select").data("json-url"),data:function(e){return{search:e.term}}},dropdownParent:$(a)}).off("select2:open").on("select2:open",(function(e){$(".select2-results .select2-results__options").niceScroll({autohidemode:!1,cursorwidth:4,cursorcolor:"#BCC3CA",cursorborder:2,cursorborderradius:2,horizrailenabled:!0})}))}))},addWitness:function(){if($(".addWitness").length){var e=1;$(".addWitness").on({click:function(){var a="<div class='form-row'><a href='javascript:;' class='button button-v4 color-1 line-height-sml removeWitness'><i class='icon-cancel'></i></a><span class='label witness-label'>Witness Statments</span><div class='input-group-content'><label><input type='text' name='witnessName"+e+"' placeholder='Name'></label><label><input type='text' name='witnessSurname"+e+"' placeholder='Surname'></label></div><div class='form-row'><label><span class='label'></span><textarea name='witnessStatement"+e+"' placeholder='Statement'></textarea></label></div></div>";$(".witness-container").append(a),e++,$(".removeWitness").off("click").on({click:function(){$(this).parents(".form-row").remove()}})}})}},datePicker:function(){if($(".datepicker").length&&$(".datepicker").each((function(){$(this).datepicker()})),$("#calendar").length){var e=$("#calendar").data("next-url");$("#calendar").datepicker({onSelect:function(a,t){window.location.href=e+"?date="+a}})}},timePicker:function(){$(".timepicker").length&&$(".timepicker").timepicker({timeFormat:"h:mm p",dynamic:!1,dropdown:!0,scrollbar:!0,zindex:99999})},dropzone:function(){$(".photo-upload").length&&$(".photo-upload").each((function(){var e=$(this).find(".photo-upload-inner"),a=e.data("upload-url"),t=e.data("delete-url"),n=e.data("max-files")?e.data("max-files"):null;e.hasClass("dz-started")||e.dropzone({url:a,maxFiles:n,addRemoveLinks:!0,dictRemoveFile:"",thumbnailMethod:"contain",dictDefaultMessage:null,removedfile:function(e){var a,n=e.name;return $.ajax({url:t,type:"POST",data:"id="+n,dataType:"html"}),null!=(a=e.previewElement)?a.parentNode.removeChild(e.previewElement):void 0},init:function(){var a=this;if(a.on("addedfile",(function(e){null!=a.files[n]&&a.removeFile(a.files[0])})),e.parents(".photo-upload").hasClass("upload-view")){var t=e.data("upload-ajax-url");$.ajax({url:t}).done((function(e){for(var t=0;t<e.data.length;t++)a.files.push(e.data[t]),a.emit("addedfile",e.data[t]),a.emit("thumbnail",e.data[t],e.data[t].url),a.emit("complete",e.data[t]),e.data[t].previewElement.classList.add("dz-success"),e.data[t].previewElement.classList.add("dz-complete")}))}}})}))},filterControl:function(){if($(".dynamic-content").length&&Boolean($(".dynamic-content").data("template-url"))&&$(".dynamic-content").is(":empty")){function e(e,a,t,n){$(".dynamic-page").addClass("loading"),t.html(""),$.ajax({url:e,method:"GET",dataType:"json",data:n,async:!1}).done((function(e){var n=Handlebars.compile(a)(e);t.html(n).parents(".dynamic-page").removeClass("loading"),main.fancybox()}))}$(".dynamic-content").each((function(){var a,t=$(this),n=t.data("template-url"),o=t.data("json-url");$.ajax({url:n,method:"GET"}).done((function(n){a=n,$("#filter-form").length?$("#filter-form").submit((function(n){n.preventDefault();var i=$("#filter-form").serialize();e(o,a,t,i)})).submit():e(o,a,t)}))}))}},carousel:function(){$(".card-carousel").length&&$(".card-carousel").owlCarousel({rtl:!0,margin:15,nav:!0,navText:["<i class='icon-right-open'></i>","<i class='icon-left-open'></i>"],dots:!1})},fancybox:function(){$.fancybox.defaults.touch=!1,$("[data-fancybox-card]").length&&$("[data-fancybox-card]").fancybox({smallBtn:!1,toolbar:!1}),$("[data-fancybox-search]").length&&$("[data-fancybox-search]").fancybox({smallBtn:!1,toolbar:!1,beforeLoad:function(e,a,t){var n=t.opts.$orig;n&&n.parents(".search-box-v2").addClass("fancy-click-element")}}),$(document).on("afterLoad.fb",(function(e,a){main.carousel(),main.timePicker(),main.dropzone(),main.validationsCommon()}))},validationMethods:function(){$(".no-paste").bind("cut copy paste",(function(e){e.preventDefault()})),$(".only-number").on({keydown:function(e){-1!==$.inArray(e.keyCode,[46,8,9,27,13,110,190])||65==e.keyCode&&(!0===e.ctrlKey||!0===e.metaKey)||e.keyCode>=35&&e.keyCode<=40||(e.shiftKey||e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)&&e.preventDefault()}}),$.validator.addMethod("lettersonly",(function(e,a){return this.optional(a)||/^[a-z ğüöçıİş]+$/i.test(e)}))},validationsCommon:function(){var e={ignore:".skip-validation, .dynamic-skip-validation",errorElement:"span",errorPlacement:function(e,a){e.addClass("text-danger").appendTo(a.parents(".form-row"))},highlight:function(e,a,t){$(e).parents(".form-row").removeClass(t).addClass(a)},unhighlight:function(e,a,t){$(e).parents(".form-row").removeClass(a).addClass(t)},submitHandler:function(e){if($(e).data("url")){var a=$(e).data("url"),t=$(e).attr("method")||"GET",n=$(e).attr("enctype"),o={url:a,type:t,dataType:"json",data:$(e).serialize(),cache:!1,timeout:9e5};"multipart/form-data"===n&&$.extend(o,{processData:!1,contentType:!1,timeout:6e4,data:new FormData(e)}),$.ajax(o).done((function(a){if(a.status)if($(e).hasClass("previousCase")){var t=$(e).data("template-url");$.ajax({url:t,method:"GET"}).done((function(t){$(e).find(".dynamic-content").addClass("loading");var n=Handlebars.compile(t)(a);$(e).find(".dynamic-content").html(n).removeClass("loading"),$(".previous-case-id").off("click").on({click:function(){var e=$(this).data("case-id");$(".fancy-click-element").find(".add-previous-case-id").val(e),$.fancybox.close()}})}))}else a.nextUrl&&(window.location.href=a.nextUrl);else a.message&&($(e).find(".form-general-error .alert-title").text(a.message),$(e).find(".form-general-error").show())}))}else e.submit()}},a=$(".previousCase");if(a.length){var t=$.extend({},e);a.validate(t)}},alertify:function(e,a,t){var n="<div class='alertify "+e+"'><p class='message'>"+a+"</p></div>";$("body").append(n),$(".alertify").fadeIn(300),setInterval((function(){$(".alertify").fadeOut(300,(function(){$(this).remove()}))}),t)}};function initMap(){$("#map").length&&main.cardTransactionLocations()}$((function(){main.init(),main.inputAction(),main.customSelectbox(),main.addWitness(),main.datePicker(),main.timePicker(),main.dropzone(),main.carousel(),main.fancybox(),main.filterControl(),main.validationMethods(),main.validationsCommon()}));